@(transactions: List[models.dto.TransactionVO])(employeeNames : String)(medicinesJson : String)(transactionForm: Form[Transaction])(errorKeys: List[String])
@import play.Configuration
@import controllers.routes.javascript._
@scripts = {
	<script src="@routes.Assets.at("javascripts/transaction.js")" type="text/javascript"></script>
	<script src="@routes.Assets.at("javascripts/transaction.return.js")" type="text/javascript"></script>
	<script type="text/javascript" src="@routes.TransactionController.javascriptRoutes"></script>
	<script type="text/javascript">
	  var employeeNamesObj = $.parseJSON('@employeeNames'.replace(/&quot;/ig,'"'));
	  var medicineJsonObj = $.parseJSON('@medicinesJson'.replace(/&quot;/ig,'"'));
	  var transactionFormHasError = @transactionForm.hasErrors;
	  var isVisitor = false;
	  var errorFieldIds = [];
	  @for((key, value) <- transactionForm.errors) {
		  errorFieldIds.push('@key');
	  }
	</script>
}
@hasRecords = @{if(transactions.size() == 0) false else true}

@main(Configuration.root().getString("transaction.title"), scripts) {

	<div name="container" style="width: 100%;">
		<div>
			@if(hasRecords == false){
				<h4 style="color: red;">@Configuration.root().getString("transaction.table.empty.msg")</h4>
		    }
		    <div id="txnMsg" class="ui-state-highlight ui-corner-all" style="padding: 0 1em; width: 524px; margin-bottom: 5px; display:none">
			    <p style="font-size: 12px">
			    	<span class="ui-icon ui-icon-info" style="float: left; margin-right: .3em;"></span>
			    	<label id="medSupReturned"></label>&nbsp;@Configuration.root().getString("transaction.returnMed.success.message")
			    </p>
			</div> 
			<div id="txnErrorAlert" class="ui-state-error ui-corner-all" style="padding: 0 1em; width: 524px; margin-bottom: 5px">
			    <p style="font-size: 12px">
			    	<span class="ui-icon ui-icon-alert" style="float: left; margin-right: .3em;"></span>
			    	@Configuration.root().getString("transaction.returnMed.error.message")
			    </p>
			</div>
			<label>Log Transaction For: </label>
			<button type="button" onclick="displayEmployeeDetails();">Employee</button>
			&nbsp;
			<button type="button" onclick="displayVisitorDetails();" >Visitor</button>
		</div>
		<br>
		<div>
			@if(hasRecords == true){		    
		    	<table class="logsTable" border="1">
					  <thead>
						  <tr class="logsHeaders">
						    <th>@Configuration.root().getString("transaction.table.col1")</th>
						    <th>@Configuration.root().getString("transaction.table.col2")</th>
						    <th>@Configuration.root().getString("transaction.table.col3")</th>
						    <th>@Configuration.root().getString("transaction.table.col4")</th>
						    <th>&nbsp;</th>
						  </tr>
					  </thead>
				      <tbody>  
       					 @for((txn,idx) <- transactions.zipWithIndex){
						  	 <tr>
						  		<td hidden="true" class="id">@txn.getId</td>
						  		<td hidden="true" class="medSupId">@txn.getMedSupItems.getId</td>
						  		<td class="empName">@txn.getEmployeeName</td>
				  				<td class="medSupply">@txn.getMedSupItems.getBrandName</td>
						  		<td class="quantity">@txn.getMedSupItems.getQuantity</td>
						  		<td class="timeStamp">@txn.getFormattedTimeStamp</td>
						  		@if(txn.getMedSupItems.isReturned) {
								  <td class="return">
								  		<input type="button" disabled="disabled"
								  		value="@Configuration.root().getString("transaction.table.returnButton")"/> 
								  </td>
								} else {
								   <td>
								   		<input type="button" class="returnBtn"  
								   		value="@Configuration.root().getString("transaction.table.returnButton")"/>
								   </td>
								}
						  	 </tr>
          				 }
				        </tbody>    
				 </table>
		      }
		</div>
		<div class="bgCover">&nbsp;</div>
		@returnMedConfirmationOverlay()
		@transactionOverlay(transactionForm: Form[Transaction], errorKeys: List[String])
	</div>	
}
